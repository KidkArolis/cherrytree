
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>API Reference Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="api.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Basics
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="basics/installation.html">
            
                <a href="basics/installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="basics/usage.html">
            
                <a href="basics/usage.html">
            
                    
                    Basic Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="middleware.md">
            
                <span>
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="nested.md">
            
                <span>
            
                    
                    Nested Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="matching.md">
            
                <span>
            
                    
                    Route Matching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="options.md">
            
                <span>
            
                    
                    Router Options
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    [Examples]
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="react.md">
            
                <span>
            
                    
                    Using with React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="react-redux.md">
            
                <span>
            
                    
                    Using with React and Redux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="lazy.md">
            
                <span>
            
                    
                    Lazy loading Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    Server side usage
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.4" data-path="api.html">
            
                <a href="api.html">
            
                    
                    API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="api.html">
            
                <a href="api.html#createRouter">
            
                    
                    createRouter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="api.html">
            
                <a href="api.html#start">
            
                    
                    router.start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="api">
            
                <span>
            
                    
                    router.stop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="api">
            
                <span>
            
                    
                    router.transitionTo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="api">
            
                <span>
            
                    
                    router.href
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="api">
            
                <span>
            
                    
                    router.back
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="api">
            
                <span>
            
                    
                    router.forward
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="api">
            
                <span>
            
                    
                    router.use
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="api">
            
                <span>
            
                    
                    router.map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="api">
            
                <span>
            
                    
                    router.getState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="api">
            
                <span>
            
                    
                    router.matchers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="CHANGELOG.html">
            
                <a href="CHANGELOG.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >API Reference</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="docs">Docs</h1><h2 id="api">API</h2><ul><li><strong>createRouter</strong> - create the router
</li>
<li><strong>router.start</strong>
</li>
<li><a href="#start"><code>router.start</code></a>
</li>
<li><strong>router.stop</strong>
</li>
<li><strong>router.transitionTo</strong>
</li>
<li><strong>router.href</strong>
</li>
<li><strong>router.back</strong>
</li>
<li><strong>router.forward</strong>
</li>
<li><strong>router.use</strong>
</li>
<li><strong>router.getState</strong>
</li>
<li><strong>router.matchers</strong>
</li></ul>
<h3 id="var-router--neonoptions">var router = neon(options)</h3><ul><li><strong>routes</strong> - a route map, see below for more details
</li>
<li><strong>middleware</strong> - a set of middleware that will get applied to each transition
</li>
<li><strong>options.log</strong> - a function that is called with logging info, default is noop. Pass in <code>true</code>/<code>false</code> or a custom logging function.
</li>
<li><strong>options.pushState</strong> - default is true. Set to <code>false</code> to use hashchange instead.
</li>
<li><strong>options.base</strong> - default is <code>/</code>. Use in combination with <code>pushState: true</code> if your application is not being served from the base url /.
</li>
<li><strong>options.interceptLinks</strong> - default is true. When pushState is used - intercepts all link clicks when appropriate, prevents the default behaviour and instead uses pushState to update the URL and handle the transition via the router. You can also set this option to a custom function that will get called whenever a link is clicked if you want to customize the behaviour. Read more on <a href="#intercepting-links">intercepting links below</a>.
</li>
<li><strong>options.qs</strong> - default is a simple built in query string parser. Pass in an object with <code>parse</code> and <code>stringify</code> functions to customize how query strings get treated.
</li>
<li><strong>options.Promise</strong> - default is window.Promise or global.Promise. Promise implementation to be used when constructing transitions.
</li></ul>
<h4 id="routes">routes</h4><p>This is an example route map:</p><pre><code class="lang-js"><span class="hljs-keyword">let</span> routes = [
  { name: <span class="hljs-string">&apos;app&apos;</span>, path: <span class="hljs-string">&apos;/&apos;</span>, children: [
    { name: <span class="hljs-string">&apos;about&apos;</span> }
    { name: <span class="hljs-string">&apos;post&apos;</span>, path: <span class="hljs-string">&apos;:postId&apos;</span>, children: [
      { name: <span class="hljs-string">&apos;show&apos;</span> }
      { name: <span class="hljs-string">&apos;edit&apos;</span> }
    ]}
  ]}
]</code></pre>
<h4 id="nested-paths">Nested paths</h4><p>Nested paths are concatenated unless they start with a &apos;/&apos;. For example</p><pre><code class="lang-js">router.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">route</span>) </span>{
  route(<span class="hljs-string">&apos;foo&apos;</span>, {path: <span class="hljs-string">&apos;/foo&apos;</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    route(<span class="hljs-string">&apos;bar&apos;</span>, {path: <span class="hljs-string">&apos;/bar&apos;</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      route(<span class="hljs-string">&apos;baz&apos;</span>, {path: <span class="hljs-string">&apos;/baz&apos;</span>})
    });
  })
})</code></pre>
<p>The above map results in 1 URL <code>/baz</code> mapping to [&apos;foo&apos;, &apos;bar&apos;, &apos;baz&apos;] routes.</p><pre><code class="lang-js">router.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">route</span>) </span>{
  route(<span class="hljs-string">&apos;foo&apos;</span>, {path: <span class="hljs-string">&apos;/foo&apos;</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    route(<span class="hljs-string">&apos;bar&apos;</span>, {path: <span class="hljs-string">&apos;bar&apos;</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      route(<span class="hljs-string">&apos;baz&apos;</span>, {path: <span class="hljs-string">&apos;baz&apos;</span>})
    });
  })
})</code></pre>
<p>The above map results in 1 URL <code>/foo/bar/baz</code> mapping to [&apos;foo&apos;, &apos;bar&apos;, &apos;baz&apos;] routes.</p><h4 id="dynamic-paths">Dynamic paths</h4><p>Paths can contain dynamic segments as described in the docs of <a href="https://github.com/pillarjs/path-to-regexp" target="_blank">path-to-regexp</a>. For example:</p><pre><code class="lang-js">{ name: <span class="hljs-string">&apos;foo&apos;</span>, path: <span class="hljs-string">&apos;/hello/:myParam&apos;</span> } <span class="hljs-comment">// single named param, matches /hello/1</span>
{ name: <span class="hljs-string">&apos;foo&apos;</span>, path: <span class="hljs-string">&apos;/hello/:myParam/:myOtherParam&apos;</span> } <span class="hljs-comment">// two named params, matches /hello/1/2</span>
{ name: <span class="hljs-string">&apos;foo&apos;</span>, path: <span class="hljs-string">&apos;/hello/:myParam?&apos;</span> } <span class="hljs-comment">// single optional named param, matches /hello and /hello/1</span>
{ name: <span class="hljs-string">&apos;foo&apos;</span>, path: <span class="hljs-string">&apos;/hello/:splat*&apos;</span> } <span class="hljs-comment">// match 0 or more segments, matches /hello and /hello/1 and /hello/1/2/3</span>
{ name: <span class="hljs-string">&apos;foo&apos;</span>, path: <span class="hljs-string">&apos;/hello/:splat+&apos;</span> } <span class="hljs-comment">// match 1 or more segments, matches /hello/1 and /hello/1/2/3</span></code></pre>
<h4 id="abstract-routes">Abstract routes</h4><p>By default, both leaf and non leaf routes can be navigated to. Sometimes you might not want it to be possible to navigate to certain routes at all, e.g. if the route is only used for data fetching and doesn&apos;t render anything by itself. In that case, you can set <code>abstract: true</code> in the route options. Abstract routes can still form a part of the URL.</p><pre><code class="lang-js">router.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">route</span>) </span>{
  route(<span class="hljs-string">&apos;application&apos;</span>, {path: <span class="hljs-string">&apos;/&apos;</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    route(<span class="hljs-string">&apos;dashboard&apos;</span>, {path: <span class="hljs-string">&apos;dashboard/:accountId&apos;</span>, abstract: <span class="hljs-literal">true</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      route(<span class="hljs-string">&apos;defaultDashboard&apos;</span>, {path: <span class="hljs-string">&apos;&apos;</span>})
      route(<span class="hljs-string">&apos;realtimeDashboard&apos;</span>, {path: <span class="hljs-string">&apos;realtime&apos;</span>})
    });
  })
})</code></pre>
<p>Abstract routes are especially useful when creating <code>index</code> subroutes as demonstrated above. The above route map results in the following URLs:</p><pre><code>/ - [&apos;application&apos;]
/dashboard/:accountId - [&apos;application&apos;, &apos;dashboard&apos;, &apos;defaultDashboard&apos;]
/dashboard/:accountId/realtime - [&apos;application&apos;, &apos;dashboard&apos;, &apos;realtimeDashboard&apos;]</code></pre>
<p>It&apos;s also common to redirect from non leaf routes. In this example we might want to redirect from <code>application</code> to the <code>defaultDashboard</code> route. If each of your routes are backed by some route handler object, you can achieve the redirect with the following middleware:</p><pre><code class="lang-js">router.use(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">redirect</span> (<span class="hljs-params">transition</span>) </span>{
  <span class="hljs-keyword">var</span> lastRoute = transition.routes[transition.routes.length - <span class="hljs-number">1</span>]
  <span class="hljs-keyword">if</span> (lastRoute.handler.redirect) {
    lastRoute.handler.redirect(transition.params, transition.query)
  }
})</code></pre>
<h3 id="routerusefn">router.use(fn)</h3><p>Middleware has the following shape <code>router =&gt; { next: (transition) }</code>, e.g.:</p><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">middleware</span> (<span class="hljs-params">router</span>) </span>{
  <span class="hljs-keyword">return</span> {
    name: <span class="hljs-string">&apos;name-of-the-middleware&apos;</span>,
    next: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">transition, redirect, cancel</span>) </span>{},
    done: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">transition</span>) </span>{},
    error: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, transition</span>) </span>{}
  }
}</code></pre>
<p>or in ES6</p><pre><code class="lang-js"><span class="hljs-keyword">const</span> middleware = router =&gt; ({
  name: <span class="hljs-string">&apos;name-of-the-middleware&apos;</span>,
  next: (transition, redirect, cancel) =&gt; {},
  done: (transition) =&gt; {},
  error: (err, transition) =&gt; {}
})</code></pre>
<p>You can implement all or only some of the lifecycle hooks. E.g. typically you&apos;ll only need the <code>next</code> hook.</p><p>Add a transition middleware. Every time a transition takes place this middleware will be called with a transition as the argument. You can call <code>use</code> multiple times to add more middlewares. The middleware function can return a promise and the next middleware will not be called until the promise of the previous middleware is resolved. The result of the promise is passed in as a second argument to the next middleware. E.g.</p><pre><code class="lang-js">router.use(router =&gt; ({
  next: (transition, redirect, cancel) =&gt;
    <span class="hljs-built_in">Promise</span>.all(transition.routes.map(route =&gt;
      route.options.handler.fetchData()
    })).then(data =&gt; {
      router.data = data
    })
  }
}))

router.use(router =&gt; ({
  next: transition =&gt;
    transition.routes.forEach((route, i) =&gt;
      route.options.handler.activate(datas[i]))
  })
})</code></pre>
<h4 id="transition">transition</h4><p>Transition contains the following attributes</p><ul><li><code>id</code>
</li>
<li><code>routes</code>
</li>
<li><code>path</code>
</li>
<li><code>pathname</code>
</li>
<li><code>params</code>
</li>
<li>`query``
</li>
<li><code>state</code>
</li>
<li><code>prev</code>
<ul><li><code>id</code>
</li>
<li><code>routes</code>
</li>
<li><code>path</code>
</li>
<li><code>pathname</code>
</li>
<li><code>params</code>
</li>
<li><code>query</code>
</li>
<li><code>state</code>
</li></ul>
</li></ul>
<h4 id="route">route</h4><p>During every transition, you can inspect <code>transition.routes</code> and <code>transition.prev.routes</code> to see where the router is transitioning to. These are arrays that contain a list of route descriptors. Each route descriptor has the following attributes</p><ul><li><code>name</code> - e.g. <code>&apos;message&apos;</code>
</li>
<li><code>path</code> - the path segment, e.g. <code>&apos;message/:id&apos;</code>
</li>
<li><code>state</code> - an object that can be used to store route state
</li></ul>
<p>This will also contain any other extra attributes that were set on the route. E.g. you might want to attach <code>component</code>, <code>view</code>, <code>layout</code> and similar attributes that will then get passed through to the middleware.</p><h3 id="routerstart"><a id="start"></a><a href="#start"><code>router.start()</code></a></h3><p>After the router has been configured with a route map and middleware - start listening to URL changes and transition to the appropriate route based on the current URL.</p><p>When using <code>location: &apos;memory&apos;</code>, the current URL is not read from the browser&apos;s location bar and instead can be passed in via listen: <code>listen(path)</code>.</p><h3 id="routerstop">router.stop()</h3><p>Stop listening to URL changes</p><h3 id="routertransitionto-route-params-query-replace-">router.transitionTo({ route, params, query, replace })</h3><p>Transition to a route, e.g.</p><pre><code class="lang-js">router.transitionTo({ route: <span class="hljs-string">&apos;about&apos;</span> })
router.transitionTo({ route: <span class="hljs-string">&apos;about&apos;</span>, replace: <span class="hljs-literal">true</span> })
router.transitionTo({ route: <span class="hljs-string">&apos;posts.show&apos;</span>, params: { postId: <span class="hljs-number">1</span> } })
router.transitionTo({ route: <span class="hljs-string">&apos;posts.show&apos;</span>, params: { postId: <span class="hljs-number">2</span> }, query: {commentId: <span class="hljs-number">2</span> } })</code></pre>
<p>Passing <code>replace: true</code> doesn&apos;t add an entry in browser&apos;s history, instead replaces the current entry. Useful if you don&apos;t want this transition to be accessible via browser&apos;s Back button, e.g. if you&apos;re redirecting, or if you&apos;re navigating upon clicking tabs in the UI, etc.</p><h3 id="routerhref-route-params-query-">router.href({ route, params, query })</h3><p>Generate a URL for a route, e.g.</p><pre><code class="lang-js">router.href({ route: <span class="hljs-string">&apos;about&apos;</span>} )
router.href({ route: <span class="hljs-string">&apos;posts.show&apos;</span>, params: { postId: <span class="hljs-number">1</span> } })
router.href({ route: <span class="hljs-string">&apos;posts.show&apos;</span>, params: { postId: <span class="hljs-number">2</span> }, query: { commentId: <span class="hljs-number">2</span> } })</code></pre>
<p>It generates a URL with # if router is in hashChange mode and with no # if router is in pushState mode.</p><h3 id="routerisactive-route-params-query-">router.isActive({ route, params, query })</h3><p>Check if a given route, params and query is currently active.</p><pre><code class="lang-js">router.isActive({ route: <span class="hljs-string">&apos;status&apos;</span> })
router.isActive({ route: <span class="hljs-string">&apos;status&apos;</span>, params: { user: <span class="hljs-string">&apos;me&apos;</span> } })
router.isActive({ route: <span class="hljs-string">&apos;status&apos;</span>, params: { user: <span class="hljs-string">&apos;me&apos;</span> }, query: { commentId: <span class="hljs-number">2</span> } })</code></pre>
<h3 id="routergetstate">router.getState()</h3><p>Get current router state.</p><h3 id="routermatchers">router.matchers</h3><p>Use this to inspect all the routes and their URL patterns that exist in your application. It&apos;s an array of:</p><pre><code class="lang-js">{
  name,
  path,
  routes
}</code></pre>
<p>listed in the order that they will be matched against the URL.</p><h2 id="query-params">Query params</h2><p>Cherrytree will extract and parse the query params using a very simple query string parser that only supports key values. For example, <code>?a=1&amp;b=2</code> will be parsed to <code>{a: 1, b:2}</code>. If you want to use a more sophisticated query parser, pass in an object with <code>parse</code> and <code>stringify</code> functions - an interface compatible with the popular <a href="https://github.com/hapijs/qs" target="_blank">qs</a> module e.g.:</p><pre><code class="lang-js">neon({
  qs: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;qs&apos;</span>)
})</code></pre>
<h2 id="errors">Errors</h2><p>Transitions can fail, in which case the transition promise is rejected with the error object. This could happen, for example, if some middleware throws or returns a rejected promise.</p><p>There are also two special errors that can be thrown when a redirect happens or when transition is cancelled completely.</p><p>In case of redirect (someone initiating a router.transitionTo() while another transition was active) and error object will have a <code>type</code> attribute set to &apos;TransitionRedirected&apos; and <code>nextPath</code> attribute set to the path of the new transition.</p><p>In case of cancelling (someone calling transition.cancel()) the error object will have a <code>type</code> attribute set to &apos;TransitionCancelled&apos;.</p><p>If you have some error handling middleware - you most likely want to check for these two special errors, because they&apos;re normal to the functioning of the router, it&apos;s common to perform redirects.</p><h2 id="browserlocation">BrowserLocation</h2><p>Cherrytree can be configured to use differet implementations of libraries that manage browser&apos;s URL/history. By default, Cherrytree will use a very versatile implementation - <code>cherrytree/lib/locations/browser</code> which supports <code>pushState</code> and <code>hashChange</code> based URL management with graceful fallback of <code>pushState</code> -&gt; <code>hashChange</code> -&gt; <code>polling</code> depending on browser&apos;s capabilities.</p><p>Configure BrowserLocation by passing options directly to the router.</p><pre><code class="lang-js"><span class="hljs-keyword">var</span> router = neon({
  pushState: <span class="hljs-literal">true</span>
})</code></pre>
<ul><li>options.pushState - default is false, which means using hashchange events. Set to true to use pushState.
</li>
<li>options.root - default is <code>/</code>. Use in combination with <code>pushState: true</code> if your application is not being served from the root url /.
</li></ul>
<h2 id="memorylocation">MemoryLocation</h2><p>MemoryLocation can be used if you don&apos;t want router to touch the address bar at all. Navigating around the application will only be possible programatically by calling <code>router.transitionTo</code> and similar methods.</p><p>e.g.</p><pre><code class="lang-js"><span class="hljs-keyword">var</span> router = neon({
  location: <span class="hljs-string">&apos;memory&apos;</span>
})</code></pre>
<h2 id="customlocation">CustomLocation</h2><p>You can also pass a custom location in explicitly. This is an advanced use case, but might turn out to be useful in non browser environments. For this you&apos;ll need to investigate how BrowserLocation is implemented.</p><pre><code class="lang-js"><span class="hljs-keyword">var</span> router = neon({
  location: myCustomLocation()
})</code></pre>
<h2 id="intercepting-links">Intercepting Links</h2><p>Cherrytree intercepts all link clicks when using pushState, because without this functionality - the browser would just do a full page refresh on every click of a link.</p><p>The clicks <strong>are</strong> intercepted only if:</p><ul><li>router is passed a <code>interceptLinks: true</code> (default)
</li>
<li>the currently used location and browser supports pushState
</li>
<li>clicked with the left mouse button with no cmd or shift key
</li></ul>
<p>The clicks that <strong>are never</strong> intercepted:</p><ul><li>external links
</li>
<li><code>javascript:</code> links
</li>
<li><code>mailto:</code> links
</li>
<li>links with a <code>data-bypass</code> attribute
</li>
<li>links starting with <code>#</code>
</li></ul>
<p>The default implementation of the intercept click handler is:</p><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultClickHandler</span> (<span class="hljs-params">event, link, router</span>) </span>{
  event.preventDefault()
  router.transitionTo(router.location.removeRoot(link.getAttribute(<span class="hljs-string">&apos;href&apos;</span>)))
}</code></pre>
<p>You can pass in a custom function as the <code>interceptLinks</code> router option to customize this behaviour. E.g. to use <code>replace</code> option in <code>transitionTo</code>.</p><h2 id="handling-404">Handling 404</h2><p>There are a couple of ways to handle URLs that don&apos;t match any routes.</p><p>You can create a middleware to detects when <code>transition.routes.length</code> is 0 and render a 404 page.</p><p>Alternatively, you can also declare a catch all path in your route map:</p><pre><code class="lang-js">router.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">route</span>) </span>{
  route(<span class="hljs-string">&apos;application&apos;</span>, {path: <span class="hljs-string">&apos;/&apos;</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    route(<span class="hljs-string">&apos;blog&apos;</span>)
    route(<span class="hljs-string">&apos;missing&apos;</span>, {path: <span class="hljs-string">&apos;:path*&apos;</span>})
  })
})</code></pre>
<p>In this case, when nothing else matches, a transition to the <code>missing</code> route will be initiated with <code>transition.routes</code> as [&apos;application&apos;, &apos;missing&apos;]. This gives you a chance to activate and render the <code>application</code> route before rendering a 404 page.</p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="api.html#createRouter" class="navigation navigation-next navigation-unique" aria-label="Next page: createRouter">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"API Reference","level":"1.4","depth":1,"next":{"title":"createRouter","level":"1.4.1","depth":2,"anchor":"#createRouter","path":"api.md","ref":"api.md#createRouter","articles":[]},"previous":{"title":"Server side usage","level":"1.3.4","depth":2,"ref":"","articles":[]},"dir":"ltr"},"config":{"plugins":["livereload"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"api.md","mtime":"2016-09-03T11:16:37.000Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2016-09-03T11:29:41.687Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

